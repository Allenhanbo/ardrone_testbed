# AR Drone pose estimation with the ORB-SLAM library
This repository adapts the ORB-SLAM library for pose estimation on the AR-Drone. Scale estimation for the monocular slam process is generated by comparing the ORB-SLAM pose estimate with the altitude estimate published in the /ardrone/navdata topic. There is also efficient collision checking functionality for the point cloud generated by ORB-SLAM. 

## Packages
--ardrone_autonomy--
This is the driver for sending velocity commands from a computer to the AR-Drone and receiving sensor data via wifi connection. It is cloned from the git repo:

[ARdrone driver repo](https://github.com/AutonomyLab/ardrone_autonomy) 

--ORB_SLAM2--
This is the SLAM library that is used for mapping and localization. It is cloned from the git repo:

[Monocular slam repo](https://github.com/raulmur/ORB_SLAM2) 

You will have to follow the setup and compilation instructions in the readme for this package carefully. 

--ardrone_orb--
This package is the adaptor for the ORB_SLAM2 library into the ROS catkin framework. The settings.yaml file in this package contains camera calibration parameters for the AR-Drone camera. 

## Catkin Setup
1) You should create a local catkin workspace for the packages. Wherever you will have the top level directory run:

```
mkdir ardrone_ws && cd ardrone_ws && mkdir src 
``` 
2) Go into the src folder and clone the project

```
cd ardrone_ws/src
git clone git@github.mit.edu:bapaden/ardrone_glc.git
```

3) Go to the ORB_SLAM folder:

```
cd ardrone_ws/src/ardrone_glc/ORB_SLAM
```

4) Install the dependancies described here: [Monocular slam repo](https://github.com/raulmur/ORB_SLAM2)

5) Compile ORB_SLAM. In the ORB_SLAM directory:

```
build_ros.sh
```

6) create a catkin_workspace

```
cd ardrone_ws/src/
catkin_init_workspace
``` 

7) Run catkin_make to compile everything in the project

```
cd ardrone_ws/
catkin_make
```


### For good scale estimation:
Scale estimation is based on vertical motion so in the first few seconds of flight, flying the AR-Drone vertically will lead to a good scale estimate.